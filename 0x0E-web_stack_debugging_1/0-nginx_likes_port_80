#!/usr/bin/env bash
# This script configures Nginx to listen on port 80 and ensures it is running.

# Install Nginx if not installed
if ! dpkg -l | grep -qw nginx; then
    sudo apt-get update
    sudo apt-get install -y nginx
fi

# Ensure Nginx is listening on port 80 for all IPv4 addresses
sudo sed -i 's/listen 80 default_server;/listen 0.0.0.0:80 default_server;/' /etc/nginx/sites-available/default
sudo sed -i 's/listen \[::\]:80 default_server;/# listen [::]:80 default_server;/' /etc/nginx/sites-available/default

# Restart Nginx to apply changes
sudo service nginx restart
